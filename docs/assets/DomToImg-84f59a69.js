import{_ as f,o as y,r as I,a as T,c as B,e as L,w as M,f as h,p as k,b as D,d as s}from"./index-80173bf2.js";const m=r=>(k("data-v-23beb56c"),r=r(),D(),r),C={class:"canvasBox"},H=m(()=>s("div",{id:"el",style:{border:"1px solid lightcoral",padding:"10px",width:"250px",height:"250px","background-color":"#fff"}},[s("h1",null,"foreignObject"),s("p",null,[h(" SVG中的"),s("span",{style:{"font-weight":"bold",color:"lightblue"}},"foreignObject"),h("元素允许包含来自不同的 XML 命名空间的元素。在浏览器的上下文中，很可能是 "),s("span",{style:{"background-color":"lightseagreen",color:"#fff"}},"XHTML / HTML"),h("。 ")])],-1)),R=m(()=>s("canvas",{id:"canvas",style:{margin:"0 10px"}},null,-1)),S={__name:"DomToImg",setup(r){let t=null;y(()=>{t=document.getElementById("canvas");const o=250,a=250,e=Math.max(window.devicePixelRatio,2);t.width=o*e,t.height=a*e,t.style.width=o+"px",t.style.height=a+"px";const p=t.getContext("2d");p.scale(e,e);const b=async()=>{const d=document.getElementById("el"),n=d.getBoundingClientRect(),i=d.cloneNode(!0);i.setAttribute("xmlns","http://www.w3.org/1999/xhtml");const c=`<svg xmlns="http://www.w3.org/2000/svg" width="${n.width}" height="${n.height}">
                    <style>*{margin:0; padding:0; box-sizing:border-box;}</style>
                    <foreignObject width="${n.width}" height="${n.height}">${i.outerHTML}</foreignObject>
                </svg>`,l=new Blob([c],{type:"image/svg+xml"}),x=await u(l),g=new Image;g.onload=()=>{p.drawImage(g,0,0)},g.onerror=v=>{console.log(v)},g.src=x},u=d=>new Promise((n,i)=>{const c=new FileReader;c.onload=l=>{n(l.target.result)},c.onerror=l=>{i(l)},c.readAsDataURL(d)});b()});const _=()=>{const o=t.toDataURL();w(o,"图片.png")},w=(o,a)=>{const e=document.createElement("a");e.href=o,e.download=a,e.click()};return(o,a)=>{const e=I("el-button");return T(),B("div",C,[H,R,L(e,{type:"primary",onClick:_},{default:M(()=>[h("下载图片")]),_:1})])}}},j=f(S,[["__scopeId","data-v-23beb56c"]]);export{j as default};
