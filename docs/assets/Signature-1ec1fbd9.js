import{_ as ut,o as ht,a as pt,c as ft,p as gt,b as dt,d as J}from"./index-80173bf2.js";function et(t,e,o,_=g=>g){return t*_(.5-e*(.5-o))}function vt(t){return[-t[0],-t[1]]}function y(t,e){return[t[0]+e[0],t[1]+e[1]]}function x(t,e){return[t[0]-e[0],t[1]-e[1]]}function w(t,e){return[t[0]*e,t[1]*e]}function _t(t,e){return[t[0]/e,t[1]/e]}function j(t){return[t[1],-t[0]]}function nt(t,e){return t[0]*e[0]+t[1]*e[1]}function mt(t,e){return t[0]===e[0]&&t[1]===e[1]}function xt(t){return Math.hypot(t[0],t[1])}function wt(t){return t[0]*t[0]+t[1]*t[1]}function st(t,e){return wt(x(t,e))}function ot(t){return _t(t,xt(t))}function yt(t,e){return Math.hypot(t[1]-e[1],t[0]-e[0])}function q(t,e,o){let _=Math.sin(o),g=Math.cos(o),m=t[0]-e[0],M=t[1]-e[1],s=m*g-M*_,p=m*_+M*g;return[s+e[0],p+e[1]]}function K(t,e,o){return y(t,w(x(e,t),o))}function rt(t,e,o){return y(t,w(e,o))}var{min:A,PI:Mt}=Math,it=.275,F=Mt+1e-4;function Lt(t,e={}){let{size:o=16,smoothing:_=.5,thinning:g=.5,simulatePressure:m=!0,easing:M=n=>n,start:s={},end:p={},last:z=!1}=e,{cap:E=!0,easing:v=n=>n*(2-n)}=s,{cap:T=!0,easing:r=n=>--n*n*n+1}=p;if(t.length===0||o<=0)return[];let i=t[t.length-1].runningLength,f=s.taper===!1?0:s.taper===!0?Math.max(o,i):s.taper,I=p.taper===!1?0:p.taper===!0?Math.max(o,i):p.taper,W=Math.pow(o*_,2),D=[],l=[],b=t.slice(0,10).reduce((n,h)=>{let c=h.pressure;if(m){let u=A(1,h.distance/o),X=A(1,1-u);c=A(1,n+(X-n)*(u*it))}return(n+c)/2},t[0].pressure),a=et(o,g,t[t.length-1].pressure,M),d,L=t[0].vector,S=t[0].point,$=S,B=S,R=$,Q=!1;for(let n=0;n<t.length;n++){let{pressure:h}=t[n],{point:c,vector:u,distance:X,runningLength:Z}=t[n];if(n<t.length-1&&i-Z<3)continue;if(g){if(m){let k=A(1,X/o),G=A(1,1-k);h=A(1,b+(G-b)*(k*it))}a=et(o,g,h,M)}else a=o/2;d===void 0&&(d=a);let ct=Z<f?v(Z/f):1,at=i-Z<I?r((i-Z)/I):1;a=Math.max(.01,a*Math.min(ct,at));let O=(n<t.length-1?t[n+1]:t[n]).vector,Y=n<t.length-1?nt(u,O):1,lt=nt(u,L)<0&&!Q,U=Y!==null&&Y<0;if(lt||U){let k=w(j(L),a);for(let G=1/13,N=0;N<=1;N+=G)B=q(x(c,k),c,F*N),D.push(B),R=q(y(c,k),c,F*-N),l.push(R);S=B,$=R,U&&(Q=!0);continue}if(Q=!1,n===t.length-1){let k=w(j(u),a);D.push(x(c,k)),l.push(y(c,k));continue}let tt=w(j(K(O,u,Y)),a);B=x(c,tt),(n<=1||st(S,B)>W)&&(D.push(B),S=B),R=y(c,tt),(n<=1||st($,R)>W)&&(l.push(R),$=R),b=h,L=u}let C=t[0].point.slice(0,2),P=t.length>1?t[t.length-1].point.slice(0,2):y(t[0].point,[1,1]),V=[],H=[];if(t.length===1){if(!(f||I)||z){let n=rt(C,ot(j(x(C,P))),-(d||a)),h=[];for(let c=1/13,u=c;u<=1;u+=c)h.push(q(n,C,F*2*u));return h}}else{if(!(f||I&&t.length===1))if(E)for(let h=1/13,c=h;c<=1;c+=h){let u=q(l[0],C,F*c);V.push(u)}else{let h=x(D[0],l[0]),c=w(h,.5),u=w(h,.51);V.push(x(C,c),x(C,u),y(C,u),y(C,c))}let n=j(vt(t[t.length-1].vector));if(I||f&&t.length===1)H.push(P);else if(T){let h=rt(P,n,a);for(let c=1/29,u=c;u<1;u+=c)H.push(q(h,P,F*3*u))}else H.push(y(P,w(n,a)),y(P,w(n,a*.99)),x(P,w(n,a*.99)),x(P,w(n,a)))}return D.concat(H,l.reverse(),V)}function St(t,e={}){var o;let{streamline:_=.5,size:g=16,last:m=!1}=e;if(t.length===0)return[];let M=.15+(1-_)*.85,s=Array.isArray(t[0])?t:t.map(({x:r,y:i,pressure:f=.5})=>[r,i,f]);if(s.length===2){let r=s[1];s=s.slice(0,-1);for(let i=1;i<5;i++)s.push(K(s[0],r,i/4))}s.length===1&&(s=[...s,[...y(s[0],[1,1]),...s[0].slice(2)]]);let p=[{point:[s[0][0],s[0][1]],pressure:s[0][2]>=0?s[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],z=!1,E=0,v=p[0],T=s.length-1;for(let r=1;r<s.length;r++){let i=m&&r===T?s[r].slice(0,2):K(v.point,s[r],M);if(mt(v.point,i))continue;let f=yt(i,v.point);if(E+=f,r<T&&!z){if(E<g)continue;z=!0}v={point:i,pressure:s[r][2]>=0?s[r][2]:.5,vector:ot(x(v.point,i)),distance:f,runningLength:E},p.push(v)}return p[0].vector=((o=p[1])==null?void 0:o.vector)||[0,0],p}function $t(t,e={}){return Lt(St(t,e),e)}const Bt=t=>(gt("data-v-6f66b2e3"),t=t(),dt(),t),Et={class:"canvasBox"},It=Bt(()=>J("div",{class:"canvasWrap"},[J("canvas",{id:"canvas2"}),J("canvas",{id:"canvas"})],-1)),bt=[It],Ct={__name:"Signature",setup(t){return ht(()=>{const e=document.getElementById("canvas"),o=document.getElementById("canvas2"),_=500,g=500,m=Math.max(window.devicePixelRatio,2),M=r=>{r.width=_*m,r.height=g*m,r.style.width=_+"px",r.style.height=g+"px";const i=r.getContext("2d");return i.scale(m,m),i},s=M(e),p=M(o),z=e.getBoundingClientRect(),E=r=>{const i=r.clientX-z.left,f=r.clientY-z.top;return{x:i,y:f}},v=(r,i)=>(r+i)/2;(()=>{let r=!1,i=[],f=[],I=null;const W=l=>{l.clearRect(0,0,_,g)};e.addEventListener("mousedown",l=>{r=!0,i=[],i.push(E(l))}),window.addEventListener("mousemove",l=>{if(!r)return;i.push(E(l)),W(s);const b=$t(i,{size:16,thinning:.5,smoothing:.5,streamline:.5,start:{cap:!0,taper:0,easing:L=>L},end:{cap:!0,taper:0,easing:L=>L}}),a=D(b),d=new Path2D(a);I=d,s.fill(d)}),window.addEventListener("mouseup",()=>{r=!1,f.push(I),W(s),W(p),f.forEach(l=>{p.fill(l)})});const D=l=>{const b=l.length;if(b<4)return"";let a=l[0],d=l[1];const L=l[2];let S=`M${a[0]},${a[1]} Q${d[0]},${d[1]} ${v(d[0],L[0])},${v(d[1],L[1])} T`;for(let $=2,B=b-1;$<B;$++)a=l[$],d=l[$+1],S+=`${v(a[0],d[0])},${v(a[1],d[1])} `;return S+="Z",S}})()}),(e,o)=>(pt(),ft("div",Et,bt))}},kt=ut(Ct,[["__scopeId","data-v-6f66b2e3"]]);export{kt as default};
