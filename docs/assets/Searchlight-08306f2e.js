import{_ as x,o as m,a as _,c as f,p as v,b as g,d as y}from"./index-80173bf2.js";const S=h=>(v("data-v-bc0729a4"),h=h(),g(),h),I={class:"canvasBox"},w=S(()=>y("canvas",{id:"canvas"},null,-1)),C=[w],b={__name:"Searchlight",setup(h){return m(()=>{const a=document.getElementById("canvas"),i=500,e=500,n=Math.max(window.devicePixelRatio,2);a.width=i*n,a.height=e*n,a.style.width=i+"px",a.style.height=e+"px";const s=a.getContext("2d");s.scale(n,n),(d=>{const c=new Image;c.onload=()=>{d(c)},c.src="/pic2.webp"})(d=>{const c=()=>{s.drawImage(d,0,0,i,e)};(()=>{class l{constructor(t){this.canvasWidth=t.canvasWidth,this.canvasHeight=t.canvasHeight,this.ctx=t.ctx,this.cx=t.cx===void 0?0:t.cx,this.cy=t.cy===void 0?0:t.cy,this.radius=t.radius===void 0?70:t.radius,this.speedX=t.speedX===void 0?this.createRandom(-5,5):t.speedX,this.speedY=t.speedY===void 0?this.createRandom(-5,5):t.speedY,this.radiusSpeed=t.radiusSpeed===void 0?this.createRandom(10,20):t.radiusSpeed,this.currentAnimation="move",this.hitCount=t.hitCount===void 0?2:t.hitCount,this.done=t.done||function(){},this.opacity=1}createRandom(t,p){return Math.floor(Math.random()*(p-t)+t)}clip(){this.ctx.beginPath(),this.ctx.arc(this.cx,this.cy,this.radius,0,Math.PI*2),this.ctx.clip()}move(){if(this.currentAnimation==="move"){this.cx+=this.speedX,this.cy+=this.speedY,this.clip();let t=!1;(this.cx-this.radius<0||this.cx+this.radius>this.canvasWidth)&&(t=!0,this.speedX=-this.speedX),(this.cy-this.radius<0||this.cy+this.radius>this.canvasHeight)&&(t=!0,this.speedY=-this.speedY),t&&(this.hitCount--,this.hitCount<=0&&(this.currentAnimation="scale"))}else this.currentAnimation==="scale"?(this.radius+=this.radiusSpeed,this.clip(),this.radius>=Math.max(this.canvasWidth,this.canvasHeight)*1.5&&(this.currentAnimation="opacity")):this.currentAnimation==="opacity"&&(this.opacity-.1>=0?this.opacity-=.1:(this.opacity=0,this.currentAnimation="",this.done()))}addBlur(){this.ctx.save(),this.ctx.globalAlpha=this.opacity;const t=this.ctx.createRadialGradient(this.cx,this.cy,0,this.cx,this.cy,this.radius);t.addColorStop(0,"rgba(0,0,0,0)"),t.addColorStop(1,"rgba(0,0,0,1)"),this.ctx.fillStyle=t,this.ctx.arc(this.cx,this.cy,this.radius,0,Math.PI*2),this.ctx.fill(),this.ctx.restore()}}let r=!1;const o=new l({canvasWidth:i,canvasHeight:e,ctx:s,cx:i/2,cy:e/2,done(){r=!0}}),u=()=>{if(s.clearRect(0,0,i,e),s.fillRect(0,0,i,e),s.save(),o.move(),c(),r){s.restore();return}o.addBlur(),s.restore(),requestAnimationFrame(u)};u()})()})}),(a,i)=>(_(),f("div",I,C))}},H=x(b,[["__scopeId","data-v-bc0729a4"]]);export{H as default};
