import{_ as z,o as F,a as M,c as S,g as $}from"./index-80173bf2.js";const R={class:"canvasBox"},W=$('<canvas id="canvas" data-v-5f59b645></canvas><div class="wrap" data-v-5f59b645><input type="text" id="output" data-v-5f59b645><div class="boxWrap" data-v-5f59b645><div id="box" data-v-5f59b645></div></div><button id="start" data-v-5f59b645>开始</button></div>',2),H=[W],N={__name:"BezierEditor",setup(X){return F(()=>{const r=document.getElementById("canvas"),y=300,u=600,x=Math.max(window.devicePixelRatio,2);r.width=y*x,r.height=u*x,r.style.width=y+"px",r.style.height=u+"px";const t=r.getContext("2d");t.scale(x,x);const f=document.getElementById("box"),T=document.getElementById("start"),k=document.getElementById("output");T.addEventListener("click",()=>{f.classList.contains("move")?f.classList.remove("move"):f.classList.add("move")});const C=(o,e,s,d)=>{const c=`cubic-bezier(${o}, ${e}, ${s}, ${d})`;k.value=c,f.style.transitionTimingFunction=c},b=r.getBoundingClientRect(),h=o=>{const e=o.clientX-b.left,s=o.clientY-b.top;return{x:e,y:s}},w=(o,e,s)=>(o=o*x,e=e*x,s?t.isPointInPath(s,o,e):t.isPointInPath(o,e)),m=20,n=y-m*2,L=u-m*2,p=(o,e,s="#fff")=>{t.save(),t.beginPath(),t.arc(o,e,10,0,Math.PI*2),t.fillStyle=s,t.fill(),t.stroke(),t.restore()},P=(o,e)=>{t.beginPath(),t.arc(o,e,10,0,Math.PI*2)},g=(o,e,s,d,c="#000")=>{t.save(),t.beginPath(),t.moveTo(o,e),t.lineTo(s,d),t.strokeStyle=c,t.stroke(),t.restore()},I=o=>{t.save(),t.translate(m,m+(L-n)/2+n),t.scale(1,-1),o(),t.restore()},i={x:0,y:n},a={x:n,y:0},B=()=>{t.clearRect(0,0,y,u),I(()=>{t.beginPath(),t.moveTo(0,n),t.lineTo(0,0),t.lineTo(n,0),t.stroke(),g(i.x,i.y,0,0,"#ff0088"),g(a.x,a.y,n,n,"#00aabb"),t.beginPath(),t.moveTo(0,0),t.bezierCurveTo(i.x,i.y,a.x,a.y,n,n),t.stroke(),p(0,0),p(n,n),p(i.x,i.y,"#ff0088"),p(a.x,a.y,"#00aabb")})};B();let l="";const _={x:0,y:0},v={x:0,y:0};r.addEventListener("mousedown",o=>{const e=h(o);_.x=e.x,_.y=e.y,I(()=>{P(i.x,i.y);let s=w(e.x,e.y),d=!1;s||(P(a.x,a.y),d=w(e.x,e.y)),s?(v.x=i.x,v.y=i.y,l="point1"):d&&(v.x=a.x,v.y=a.y,l="point2")})}),window.addEventListener("mousemove",o=>{if(!l)return;const e=h(o),s=e.x-_.x,d=e.y-_.y;let c=v.x+s;const E=v.y-d;c=c<0?0:c>n?n:c,l==="point1"?(i.x=c,i.y=E):l==="point2"&&(a.x=c,a.y=E),B()}),window.addEventListener("mouseup",()=>{if(!l)return;l="";const o=(i.x/n).toFixed(2),e=(i.y/n).toFixed(2),s=(a.x/n).toFixed(2),d=(a.y/n).toFixed(2);C(o,e,s,d)})}),(r,y)=>(M(),S("div",R,H))}},V=z(N,[["__scopeId","data-v-5f59b645"]]);export{V as default};
