import{_ as B,o as I,a as R,c as S,p as E,b as L,d as p}from"./index-80173bf2.js";const x=l=>(E("data-v-9a66f17a"),l=l(),L(),l),V={class:"canvasBox",id:"canvasBox"},k=x(()=>p("input",{type:"file",accept:"image/*",id:"fileSelect"},null,-1)),C=x(()=>p("canvas",{id:"canvas"},null,-1)),M=[k,C],X={__name:"ImgViewer",setup(l){return I(()=>{const m=document.getElementById("canvasBox").getBoundingClientRect(),a=document.getElementById("canvas"),n=m.width,o=m.height,h=Math.max(window.devicePixelRatio,2);a.width=n*h,a.height=o*h,a.style.width=n+"px",a.style.height=o+"px";const s=a.getContext("2d");s.scale(h,h),document.getElementById("fileSelect").addEventListener("change",t=>{const u=t.target.files[0],c=new FileReader;c.onload=()=>{a.style.display="block";const e=new Image;e.onload=()=>{const v=e.width/e.height,y=n/o;let i=0,d=0;e.width<=n&&e.height<=o?(i=e.width,d=e.height):v>y?(i=n,d=i/v):(d=o,i=d*v),r.data={img:e,width:i,height:d},r()},e.src=c.result},c.readAsDataURL(u)});const r=()=>{s.save(),g.x+=dx,g.y+=dy;const t=s.getTransform();s.translate(g.x-t.e,g.y-t.f);const{img:u,width:c,height:e}=r.data;s.drawImage(u,0,0,c,e),s.restore()},g={x:0,y:0,scaleX:1,scaleY:1};let w=!1,_={x:0,y:0};a.addEventListener("mousedown",t=>{w=!0,_.x=t.clientX,_.y=t.clientY}),a.getBoundingClientRect(),window.addEventListener("mousemove",t=>{w&&(t.clientX-_.x,t.clientY-_.y,s.clearRect(0,0,n,o),r())}),window.addEventListener("mouseup",()=>{w=!1})}),(f,m)=>(R(),S("div",V,M))}},D=B(X,[["__scopeId","data-v-9a66f17a"]]);export{D as default};
